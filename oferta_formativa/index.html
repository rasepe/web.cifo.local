<!doctype html>
<html lang="en">
<head>
	<title>web.cifo.local.oferta formativa</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

	<!-- Fonts Awssome -->
 	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
 	
 	<!-- CSS propio -->
	<link rel="stylesheet" href="/css/style.css">
    
    <!-- datatable bootstrap 4 -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.css"/>
 	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.1.6/css/fixedHeader.bootstrap4.css"/>
	<style>
		#buscar {
			background-color: #01A5D5 !important;	
		}
		#filtrar{
			background-color: #01A5D5 !important;	
		}
		.form-group{
			padding-left:10px !important;
			padding-right:10px !important;
		}
		
	</style>
</head>
<body>
	
	<!--Creación del Navegador ---------------------------------------------------------------------->
	
	<nav class="navbar navbar-expand-md fixed-top p-0 pr-2 navbar-dark bg-info">
		<div >
		    <img src="/img/soc.jpg"  height="55px" alt="Logo SOC">
			<a class="navbar-brand p-0 m-0 d-inline-block text-wrap" style="line-height: 1em; " href="#">Servei d'Ocupació<br> de Catalunya</a>
		</div>
		<button class="navbar-toggler " type="button" data-toggle="collapse"
			data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button> 
		<div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
			<ul class="navbar-nav ">
				<li class="nav-item"><a class="nav-link" href="/centros/index.html">Centros</a></li>
				<li class="nav-item active"><a class="nav-link" href="/oferta_formativa/index.html">Oferta formativa</a></li>
				<li class="nav-item"><a class="nav-link" href="/biblioteca/index.html">Biblioteca</a></li>
				<li class="nav-item"><a class="nav-link" href="/contacto/index.html">Contacto</a></li>
				<li class="nav-item"><a class="nav-link d-block d-md-none d-lg-block" href="/campus/index.html">Campus virtual</a></li>
				<li class="nav-item"><a class="nav-link  d-block d-md-none d-lg-block" href="#">Entrar</a></li>
				<li class="nav-item"><a class="nav-link d-block d-md-none d-lg-block" href="#">Regístrate</a></li>
				<li class="nav-item dropdown d-none d-md-inline d-lg-none">
					<a class="nav-link dropdown-toggle" href="#"
					id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false"> eCampus </a>
					<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
						<a class="dropdown-item" href="/campus/index.html">Campus Virtual</a> 
						<a class="dropdown-item" href="#">Entrar</a>
						<a class="dropdown-item" href="#">Regístrate</a>
					</div>
				</li>
			</ul>
		</div>
	</nav>
	
	<!-- Creación del breadcrumb y redes sociales---------------------------------------------------------------------->
	
	<div class="row mx-2 border-bottom border-secondary" style="margin-top:55px">
		<div class="col p-0 ">
	 		<nav aria-label="breadcrumb"> 
	 			<ol class="breadcrumb m-0 mt-3 bg-transparent p-0">
	 		 		<li><i class="fa fa-home text-info"></i></li>
	 		 		<li class="breadcrumb-item text-info pl-2"><a href="/index.html">Inicio</a></li>
	    			<li class="breadcrumb-item active " aria-current="page">Oferta formativa</li>
	  		 	</ol>
			</nav>
		</div>
		<div class="col d-flex py-2 justify-content-end align-items-center">
	    	<a class="mr-1 p-1 py-1 d-inline-block rounded-circle text-white" style="background-color:#1B1FBA" href="#"><i class="fa fa-facebook fa-fw "></i></a>
	      	<a class="mr-1 p-1 py-1 d-inline-block rounded-circle text-white" style="background-color:#00acee" href="#"><i class="fa fa-twitter fa-fw"></i></a>
	      	<a class="mr-1 p-1 py-1 d-inline-block rounded-circle text-white" style="background-color:#CC4115" href="#"><i class="fa fa-google-plus fa-fw"></i></a>
	      	<a class="mr-1 p-1 py-1 d-inline-block rounded-circle bg-dark text-white" href="#"><i class="fa fa-instagram fa-fw"></i></a>
	      	<a class="mr-1 p-1 py-1 d-inline-block rounded-circle bg-danger text-white" href="#"><i class="fa fa-pinterest fa-fw"></i></a>
		</div>
	</div>
 
 <!-- Creación del contenido ---------------------------------------------------------------------->
 			<!-- ---------------creación flitros y selecciones----------------------------------- -->
 	<div class="row">
 		<div class="col-12 col-lg-4 px-0 ">
 			<h4 class="ml-4 mt-3"> Oferta formativa</h4>
 			<div class="mx-lg-4">
	 			<div id="buscar" class="col bg-info d-flex p-3   border border-light rounded">
	 				<a class="text-white" style="line-height: 1em; " href="#"><i class=" fa fa-search mx-2"></i>Buscar</a>
	 			</div>
	 			<div class="border border-light rounded pb-3 mb-3 mt-4">
		 			<div id="filtrar" class="col-12 bg-info d-flex p-3 border-light rounded-top">
		 			<a class="text-white" style="line-height: 1em; " href="#"><i class="fa fa-filter mx-2"></i>Filtrar</a>
		 			</div>
	 				<div class="pb-3 px-3" >
	 					<form>
					  		<div class="form-group mt-4">
					    		<label for="exampleFormControlSelect1">Familia Profesional</label>
					   			<select class="form-control" id="familiaProfesional">
					     			<option value="">--Elija una opción--</option>
					    		</select>
					   			<small class="form-text text-muted"><em>Lista de famílias profesionales</em></small>
					  		</div>
					   		<div class="form-group">
					    		<label for="exampleFormControlSelect1">Cursos</label>
					   			<select class="form-control" id="cursos">
					     			<option value="">--Elija una opción--</option>
					    		</select>
					    		<small class="form-text text-muted"><em>Lista de cursos</em></small>
					  		</div>
							<div class="form-group">
								<label for="exampleFormControlSelect1">Centros de formación</label>
							    <select class="form-control" id="centrosFormacion">
							    	<option value="">--Elija una opción--</option>
							    </select>
							    <small class="form-text text-muted"><em>Lista de centros de formación</em></small>
							</div>
						</form>
						<div class="d-flex justify-content-center mt-5">
							<button type="button" id="btnBorrar" class="btn btn-danger mr-1">Borrar</button>
							<button type="button" id="btnFiltrar" class="btn btn-info ml-1">Filtrar</button>
						</div>
	 				</div>
	 			</div>
 			</div>
 		</div>
 		<div class="col-lg-8 offset-lg-4 ml-0 style="margin-top:55px"">
 		 			<!-- ---------------creación datatable----------------------------------- -->	
			<div class="card-body">
				<div class="table-responsive">
					<table id="tablaOfertas" class="table table-striped table-bordered" >
					    <thead>
					        <tr>
					            <th>Código</th>
					            <th>Curso</th>
					            <th>Area</th>
					            <th>Centro</th>
					            <th>Inicio</th>
					            <th>Fin</th>
					        </tr>
					    </thead>
			    		<tbody></tbody>
					</table>
 				</div>
 			</div>
 		</div>
 	</div>	
 	 	 
 	 	 <!--------------------------------Creación Modal------------------------------------>
 	
	 	<!-- Modal -->
	 	<div class="modal fade bd-modal-lg" id="modalCentro" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true ">
	 	  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
	 	    <div class="modal-content">
	 	      <div class="modal-header">
	 	        <h5 class="modal-title" id="exampleModalCenterTitle">Oferta formativa</h5>
	 	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	 	          <span aria-hidden="true">&times;</span>
	 	        </button>
	 	      </div>
	 	      <div class="modal-body">
	 	      <div class="pb-0 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Código oferta</div>
	 	      	<div id="modCodOferta" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	      <div class="pb-0 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Curso</div>
	 	      	<div id="modCurso" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	      <div class="pb-0 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Fecha inicio</div>
	 	      	<div id="modFInicio" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	      <div class="pb-0 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Fecha fin</div>
	 	      	<div id="modFFin" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	      <div class="pb-0 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Plazas</div>
	 	      	<div id="modPlazas" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	      <div class="pb-0 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Profesor</div>
	 	      	<div id="modProfesor" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	      <div class="pb-2 pt-1 mx-3 px-0 row">
	 	      	<div class="col-6 justify-content-end d-flex text-black-50">Duración</div>
	 	      	<div id="modDuracion" class="col-6 bg-light text-dark">xxxx</div>
	 	      </div>
	 	  <!-- --------------------------------Acordeón------------------------------------------- -->    
			<div class="accordion " id="accordionExample">
			
  			<div data-target="#list-example" data-offset="0" class="scrollspy-example">
	 	   		<div class="mx-3">
		 	   		<div id="btnObjetivo" class="modal-body mb-1 mx-0 p-0 row bg-secondary text-white border-secondary rounded-top">
		 	      		<i class="fa fa-thumbs-up mr-2 mt-2 ml-3"></i>
					    	<button class=" py-1 pl-0 text-white btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
					          Objetivos
					        </button>
					</div>
					<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
			      		<div class="px-5 mb-1 border border-light card-body"></div>
			      		<div class="d-flex justify-content-end">
		        			<button id ="cerrarObjetivos" type="button" class="mb-1 btn btn-light" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">Cerrar</button>
		       			</div>	
			        </div>
			    </div>
				<div class="mx-3">
			        <div id="btnPrograma" class="modal-body mb-1 mx-0 p-0 row bg-secondary text-white border-secondary">
		 	      		<i class="fa fa-bars mr-2 mt-2 ml-3"></i>
					    	<button class=" py-1 pl-0 text-white btn btn-link" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
					          Programa
					        </button>
					</div>
					<div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
		      			<div class="px-5 mb-1 border border-light card-body"></div>
		        		<div class="d-flex justify-content-end">
		        			<button id ="cerrarPrograma" type="button" class="mb-1 btn btn-light" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Cerrar</button>
		       			</div>
		       		</div>
			     </div>
			     <div class="mx-3">
			        <div id="btnCentro" class="modal-body mb-1 mx-0 p-0 row bg-secondary text-white border-secondary rounded-bottom">
		 	      		<i class="fa fa-university mr-2 mt-2 ml-3"></i>
					    	<button class=" py-1 pl-0 text-white btn btn-link" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
					          Centro
					        </button>
					</div>
					<div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
		      			<div class=" row px-3 mb-1 border border-light card-body">
		      				<div class="col-6" id="img">	
		      				
			    			</div>
			    			<div class="card-body col-6 p-0 pl-1">
			      				<h5 id ="center" class="card-title text-info"></h5>
			      				<div class="border border-light border-right-0 border-left-0 pt-1">
				      				<div>
				      					<i class="fa fa-phone fa-fw text-muted"></i>
				      					<p id ="tf" class="mb-1 d-inline-block"></p>
				      				</div>
				      				<p class="mb-1"><i class="fa fa-envelope fa-fw text-muted"></i> 
				      					<a id ="mail" href="mailto:cifo_violeta.soc@gencat.cat"></a></p>
				      				<div>
				      					<i class="fa fa-calendar fa-fw text-muted"></i>
				      					<p id ="calendar" class="mb-1 d-inline-block"></p>
				      				</div>
				      				<div>
				      					<i class="fa fa-map-marker fa-fw text-muted"></i>
				      					<p id ="address" class="mb-1 d-inline-block"></p>
				      				</div>
				      			</div>
				      			<div class="pt-1">
				      				<h5 class="text-secondary"><i class="fa fa-road fa-fw text-muted"></i> Acceso</h5>
				      				<div class="mb-1" id ="acceso"></div>
				      			</div>      	
			 				</div>
			 				<div class="col-12 card-footer bg-transparent border-0 p-0">
								<p class="d-flex justify-content-center mb-0 mt-3 align-text-bottom"><a href="#" class="btn btn-primary">Más información...</a></p>
			 				</div>
			 				<div class="d-flex col-12 justify-content-end">
		        				<button id ="cerrarCentros" type="button" class="mb-1 btn btn-light" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Cerrar</button>
		       				</div>	
			 
		        		</div>
		       		</div>
			     </div>
				  </div> 
				 </div> 	
	 	      </div>
	 	
	 	
	 	      <div class="modal-footer">
	 	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
	 	      </div>
	 	    </div>
	 	  </div>
	 	</div>
 

 
 
 
 
 <!-- Creación del footer ---------------------------------------------------------------------->	
			<!-- ---------------redes sociales----------------------------------- -->
	<footer id="footer" class="container-fluid text-light">
		<div class="row d-flex justify-content-center align-items-center">
	      <a class="mr-1 p-1 py-2 d-inline-block  bg-transparent text-light" href="#"><i class="fa fa-twitter fa-2x fa-fw "></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-facebook fa-2x fa-fw"></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-google-plus fa-2x fa-fw"></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-instagram fa-2x fa-fw"></i></a>
	      <a class="mr-1 p-1 py-2 d-inline-block bg-transparent text-light" href="#"><i class="fa fa-pinterest fa-2x fa-fw"></i></a>
		</div>
		   <!-- ---------------directo a----------------------------------- -->
		<div class="row mt-4">
			<div class="col-12 col-md-3 d-flex justify-content-center text-center">
				<ul type="none" class="p-0 mb-5 mb-md-2">
					<li class="text-white"><h6>DIRECTO A</h6></li>
					<li><a class="text-light" href="/centros/index.html">Centros</a></li>
					<li><a class="text-light" href="/oferta_formativa/index.html">Oferta formativa</a></li>
					<li><a class="text-light" href="/biblioteca/index.html">Biblioteca</a></li>
					<li><a class="text-light" href="/contacto/index.html">Contacto</a></li>
					<li><a class="text-light" href="/campus/index.html">Campus virtual</a></li>
					<li><a class="text-light" href="#">Entrar</a></li>
					<li><a class="text-light" href="#">Registrarse</a></li>
				</ul>
			</div>
			 <!-- ---------------ayuda----------------------------------- -->
			<div class="col-12 col-md-3 d-flex justify-content-center text-center">
				<ul type="none" class="p-0 mb-5 mb-md-2">
					<li class="text-white"><h6>AYUDA</h6></li>
					<li><a class="text-light" href="#">Sobre gencat</a></li>
					<li><a class="text-light" href="#">Accessibilitat</a></li>
					<li><a class="text-light" href="#">Mapa web</a></li>
					<li><a class="text-light" href="#legal">Aviso Legal</a></li>
				</ul>
			</div>
			 <!-- ---------------aviso legal--------------------------------- -->
			<div class="col-12 col-md-6">
				<div class="text-center d-flex justify-content-center">
					<h6 class="text-white" id="legal">SERVEI D'OCUPACIÓ DE CATALUNYA</h6>
				</div>
				<p class="col-12 d-flex justify-content-center class text-center mb-5 mb-md-2">
				 Aviso legal : De acuerdo con el artículo 17.1 de la Ley 19/2014, la © Generalidad de Cataluña permite la reutilización de los contenidos y de los datos siempre que
	se cite la fuente y la fecha de actualización y que no se desnaturalice la información (artículo 8 de la Ley 37/2007) y también que no se contradiga con una licencia específica.
				</p>
				
				<div class="row">
					<div class="col-6">
						<img src="/img/sepelogotip.jpg" title="logotipo sepe" alt="logotipo sepe" class="img-fluid">
					</div>
					<div class="col-6">
						<img src="/img/logotip_Iniciativaocupaciojuvenil_bn.jpg" title="logotipo sepe" alt="logotipo sepe" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
		<div class="d-flex justify-content-center class text-center py-3 ">Copyright © Cifo 2018 </div>
     </footer>
<!-- COOKIES--------------------->
     <div class="cookiealert-container text-center fixed-bottom" id="boxCookies" style="margin-bottom: 0em; background-color: #4a4c4a; color: white; padding: 2vh;"><p>Aviso informativo: este sitio web puede utilizar cookies para mejorar su navegación. Si quieres ver el contenido de este sitio web tendrás que aceptar las cookies según la legislación vigente en nuestro país. Si no aceptas, no podrás continuar navegando por este sitio web. Clique
     <button type="submit" class="btn btn-warning" id="btnCookies" class="btn btn-primary btn-sm acceptcookies" style="border-color: #78992f; background-color: #78992f; color: white;"> aquí </button> para aceptar las cookies.</p>
    </div>
	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<!-- datatable JS -->
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.6/js/dataTables.fixedHeader.js"></script>


	<script>
	
	//----------------crear variable tipo XMLHttpRequest para todo tipo de navegadores------------------
	
	var xhr;
	if(window.XMLHttpRequest) {
		xhr = new XMLHttpRequest();
		}else if(window.ActiveXObject) {
		peticion_http = new ActiveXObject("Microsoft.XMLHTTP");
		}
	
	//-----------------------Llamada AJAX para rellenar la Família Profesional--------------------------
	
	xhr.onreadystatechange = function(){
 		if(xhr.readyState==4 && xhr.status==200){
 			var objAreas = JSON.parse(xhr.responseText);
			//console.log(objAreas);
			var arrAreas = objAreas.records;
			//console.log(arrAreas);
			for(var i=0; i<arrAreas.length; i++){
				var cadena = '<option value="' + arrAreas[i].id + '">' + arrAreas[i].nombre + '</option>';
				document.getElementById("familiaProfesional").innerHTML+=cadena;
			}
 		}
 	}	
	xhr.open('GET','http://app.cifo.local/api/public/formacion/areas/', true);
 	xhr.send();		
	
 	//-------------Llamada AJAX para rellenar los cursos según el id dela Família Profesional--------------
 	
	document.getElementById("familiaProfesional").onchange = function(){
		document.getElementById("cursos").innerHTML = '<option value="">--Elija una opción--</option>';
		xhr.onreadystatechange = function(){
	 		if(xhr.readyState==4 && xhr.status==200){
	 			var objCursos = JSON.parse(xhr.responseText);	
				//console.log(objCursos);
				var arrCursos = objCursos.records;
				//console.log(arrCursos);
				for(var i=0; i<arrCursos.length; i++){
					var cadena = '<option value="' + arrCursos[i].id + '">' + arrCursos[i].nombre + '</option>';
					document.getElementById("cursos").innerHTML+=cadena;
					
				}
	 		}
	 	}	

		xhr.open('GET','http://app.cifo.local/api/public/formacion/cursos/area/' + this.value +'/', true);
	 	xhr.send();		
	}
	
	//---------------Llamada AJAX para rellenar los centros--------------------------
	
	var xhr1;
	if(window.XMLHttpRequest) {
		xhr1 = new XMLHttpRequest();
		}else if(window.ActiveXObject) {
		peticion_http = new ActiveXObject("Microsoft.XMLHTTP");
		}
	
	xhr1.onreadystatechange = function(){
 		if(xhr1.readyState==4 && xhr1.status==200){
 			var objCentros = JSON.parse(xhr1.responseText);
			//console.log(objCentros);
			var arrCentros = objCentros.records;
			//console.log(arrCentros);
			for(var i=0; i<arrCentros.length; i++){
				var cadena = '<option value="' + arrCentros[i].id + '">' + arrCentros[i].nombre + '</option>';
				document.getElementById("centrosFormacion").innerHTML+=cadena;
			}
 		}
	}	
	xhr1.open('GET','http://app.cifo.local/api/public/formacion/centros/', true);
 	xhr1.send();		
	
 	//------------------------------------------Datatable --------------------------------------
	
 	var tabla;
 	tabla=$('#tablaOfertas').DataTable({
 		language:{
 			url: "spanishdatatable.json"
 		},
 		"columnDefs":[
 			{"data": "codigoferta", "targets": 0 },
 			{"data": "curso", "targets": 1 },
 			{"data": "area", "targets": 2 },
 			{"data": "centro", "targets": 3 },
 			{"data": "datainicio", "targets": 4 },
 			{"data": "datafin", "targets": 5 },
 			
 		],
 		responsive: true,
 		fixedHeader: true
 	});
 	//---------------Llamada AJAX para rellenar datatable de ofertas--------------------------
 	var xhr2;
	if(window.XMLHttpRequest) {
		xhr2 = new XMLHttpRequest();
		}else if(window.ActiveXObject) {
		peticion_http = new ActiveXObject("Microsoft.XMLHTTP");
		}

	xhr2.onreadystatechange = function(){
 		if(xhr2.readyState==4 && xhr2.status==200){
 			var objOfertas = JSON.parse(xhr2.responseText);
			//console.log(objOfertas);
			var arrOfertas = objOfertas.records;
			//console.log(arrOfertas);
			for(var i=0; i<arrOfertas.length; i++){
				tabla.row.add({
					"codigoferta":'<a href="javascript:void(0)" onclick="editOferta(' + arrOfertas[i].id + ')">'+arrOfertas[i].codigoferta+'</a>',
					"curso": arrOfertas[i].curso,
					"area": arrOfertas[i].area,
					"centro": arrOfertas[i].centro,
					"datainicio": arrOfertas[i].datainicio,
					"datafin": arrOfertas[i].datafin
				})
			}
			tabla.draw();
 		}
	}
	xhr2.open('GET','http://app.cifo.local/api/public/formacion/ofertas/', true);
 	xhr2.send();		
 	
 	//---------------Llamada AJAX para rellenar datatable de ofertas por filtro . funcion onclick de filtrar--------------------------
 	
 	document.getElementById("btnFiltrar").onclick = function(){
 		tabla.clear().draw();
 		var areaId = document.getElementById("familiaProfesional").value;
 		var cursoId = document.getElementById("cursos").value;
 		var centroId = document.getElementById("centrosFormacion").value;
 		
 		xhr.onreadystatechange = function(){
	 		if(xhr.readyState==4 && xhr.status==200){
	 			var objOfertas = JSON.parse(xhr.responseText);	
				var arrOfertas = objOfertas.records;
				for(var i=0; i<arrOfertas.length; i++){
					tabla.row.add({
						"codigoferta":'<a href="javascript:void(0)" onclick="editOferta(' + arrOfertas[i].id + ')">'+arrOfertas[i].codigoferta+'</a>',
						"curso": arrOfertas[i].curso,
						"area": arrOfertas[i].area,
						"centro": arrOfertas[i].centro,
						"datainicio": arrOfertas[i].datainicio,
						"datafin": arrOfertas[i].datafin
					})
				}
				tabla.draw();	
			}
	 	}
 		if(areaId =="" && cursoId ==""){
 			xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/', true);
 		}
 		if(!areaId =="" && cursoId ==""){
 			xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/area/'+areaId+'/', true);
 		}
 		if(!areaId =="" && !cursoId ==""){
 			xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/area/'+areaId+'/curso/'+cursoId+'/', true);
 		}
 		if(areaId =="" && !centroId ==""){
 			xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/centro/'+centroId+'/', true);
 		}
 		if(!areaId =="" && !centroId ==""){
 			xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/area/'+areaId+'/centro/'+centroId+'/', true);
 		}
 		if(!areaId =="" && !centroId =="" && !cursoId ==""){
 			xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/area/'+areaId+'/curso/'+cursoId+'/centro/'+centroId+'/', true);
 		}
 		xhr.send();	
	 }	
 		
 	 //---------------funcion onclick del botón borrar--------------------------
	
 	 document.getElementById("btnBorrar").onclick = function(){
 		document.getElementById("familiaProfesional").value = "";
 		document.getElementById("cursos").value = "";
 		document.getElementById("centrosFormacion").value = "";

 	 }
 	 
 	 //------------------------------Creación Modal----------------------------------

 	function editOferta(id){
 		//console.log(id);
	 	//------------------------------LLamada Ajax para centros modal----------------------------------
	 	xhr.onreadystatechange = function(){
	 		if(xhr.readyState==4 && xhr.status==200){
	 			var objOfertaCentros = JSON.parse(xhr.responseText);	
				//console.log(objCentrosModal);
				var OfertaCentros = objOfertaCentros.record;
				//console.log(OfertaCentros);
				var values =Object.values(OfertaCentros);
				console.log(values);
				document.getElementById("modCodOferta").innerHTML = values[1];
				document.getElementById("modCurso").innerHTML = values[10].nombre;
				document.getElementById("modFInicio").innerHTML = values[2];
				document.getElementById("modFFin").innerHTML = values[3];
				document.getElementById("modPlazas").innerHTML = values[5];
				document.getElementById("modProfesor").innerHTML = values[13].nombre +" "+ values[13].apellidos;
				document.getElementById("modDuracion").innerHTML = values[10].duracion;
				document.querySelector("#collapseOne div").innerHTML = values[10].objetivos;
				document.querySelector("#collapseTwo div").innerHTML = values[10].programa;
				document.getElementById("center").innerHTML = values[12].nombre;
				document.getElementById("tf").innerHTML = values[12].telefono;
				document.getElementById("mail").innerHTML = values[12].buzon;
				document.getElementById("calendar").innerHTML = values[12].horario;
				document.getElementById("address").innerHTML = values[12].direccion;
				document.getElementById("acceso").innerHTML = values[12].acceso;
				document.getElementById("acceso").innerHTML = values[12].acceso;
				var imgCentro='<img src="' + values[12].media+'" class="w-100" style="object-fit:cover">' ;
				document.getElementById("img").innerHTML=imgCentro;
	 		}
	 	}	
	 	
		xhr.open('GET','http://app.cifo.local/api/public/formacion/ofertas/' + id +'/', true);
	 	xhr.send();		
 	
	 	$('#modalCentro').modal('show')
	 }
 	
	</script>
	<script src="/cookies.js"></script>
<script type="text/javascript">
  //Si detecta que la cookie esta ok, detecta que esta ok porque ya esta aceptada, elimina el hijo del elemento boxCookies, (por lo tanto no se muestra la maquetación html)
  if (detectCookie("okCookie")) {
	  if(getCookie("okCookie")=="ok") {
		  var objBoxRGPD=document.getElementById("boxCookies");
		  objBoxRGPD.parentNode.removeChild(objBoxRGPD);
	  }
  } else {
	  //elimina el hijo del elemento boxCookies cuando ha sido aceptada por el boton con el id"btnRGPD" (por lo tanto no se muestra la maquetación html)
	  document.getElementById("btnCookies").onclick=function(){
		  setCookie("okCookie","ok",365);
		  var objBoxCookies=document.getElementById("boxCookies");
		  objBoxCookies.parentNode.removeChild(objBoxCookies);
	  }
  }
</script>
</body>
</html>
 	
 	
 	
 	
 	
 	
 	
 	
 	
 	
 	
 	